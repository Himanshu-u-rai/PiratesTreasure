<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <!-- Performance optimizations -->
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <link rel="preconnect" href="https://discontentcocoamatters.com" />
    <link rel="dns-prefetch" href="https://discontentcocoamatters.com" />

    <!-- Primary Meta Tags -->
    <title>
      Pirates Treasure - Best Free Porn Sites, Games, Movies & Streaming
      Directory 2025
    </title>
    <meta
      name="title"
      content="Pirates Treasure - Best Free Porn Sites, Games, Movies & Streaming Directory 2025"
    />
    <meta
      name="description"
      content="Discover 1000+ curated resources: Top porn sites, free games, movie streaming, software, books & music. Updated daily with the best free and premium content sites."
    />
    <meta
      name="keywords"
      content="best porn sites 2025, free porn tube sites, top adult sites, free games download, movie streaming sites, free software, pirate sites directory"
    />
    <meta name="author" content="Pirates Treasure" />
    <meta name="robots" content="index, follow" />

    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://piratestreasure.com/" />
    <meta
      property="og:title"
      content="Pirates Treasure - Best Free Porn Sites & Content Directory 2025"
    />
    <meta
      property="og:description"
      content="Your ultimate directory for 1000+ top porn sites, free games, movies, streaming and more. Curated daily."
    />
    <meta property="og:image" content="https://piratestreasure.com/logo.png" />

    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image" />
    <meta property="twitter:url" content="https://piratestreasure.com/" />
    <meta
      property="twitter:title"
      content="Pirates Treasure - Best Free Porn Sites & Content Directory 2025"
    />
    <meta
      property="twitter:description"
      content="Your ultimate directory for 1000+ top porn sites, free games, movies, streaming and more. Curated daily."
    />
    <meta
      property="twitter:image"
      content="https://piratestreasure.com/logo.png"
    />

    <!-- Canonical URL -->
    <link rel="canonical" href="https://piratestreasure.com/" />

    <!-- Structured Data -->
    <script type="application/ld+json">
      {
        "@context": "https://schema.org",
        "@type": "WebSite",
        "name": "Pirates Treasure",
        "url": "https://piratestreasure.com",
        "description": "Comprehensive directory featuring 1000+ curated resources for games, movies, streaming, software, books, music, and adult entertainment",
        "potentialAction": {
          "@type": "SearchAction",
          "target": "https://piratestreasure.com/?q={search_term_string}",
          "query-input": "required name=search_term_string"
        }
      }
    </script>

    <link rel="stylesheet" href="style.css" />
    <!-- Ad Script -->
    <script
      type="text/javascript"
      src="//discontentcocoamatters.com/a1/32/f1/a132f1c37fcdb5fbd32943a70cb55db9.js"
    ></script>
  </head>
  <body>
    <!-- Theme Toggle Button -->
    <button class="theme-toggle" id="themeToggle" aria-label="Toggle theme">
      <span class="sun-icon">‚òÄÔ∏è</span>
      <span class="moon-icon">üåô</span>
    </button>

    <!----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------->
    <!-- Left Ad Space -->
    <div class="ad-space ad-left">
      <div class="ad-banner">
        <script type="text/javascript">
          atOptions = {
            key: "df7796c8fe7377e7a1d0dc2eab460c7a",
            format: "iframe",
            height: 600,
            width: 160,
            params: {},
          };
        </script>
        <script
          type="text/javascript"
          src="//discontentcocoamatters.com/df7796c8fe7377e7a1d0dc2eab460c7a/invoke.js"
        ></script>
      </div>
    </div>

    <!-- Right Ad Space -->
    <div class="ad-space ad-right">
      <div class="ad-banner">
        <script type="text/javascript">
          atOptions = {
            key: "df7796c8fe7377e7a1d0dc2eab460c7a",
            format: "iframe",
            height: 600,
            width: 160,
            params: {},
          };
        </script>
        <script
          type="text/javascript"
          src="//discontentcocoamatters.com/df7796c8fe7377e7a1d0dc2eab460c7a/invoke.js"
        ></script>
      </div>
    </div>

    <!-- Bottom Ad Space -->
    <div class="ad-space-bottom">
      <div class="ad-banner-bottom">
        <script type="text/javascript">
          atOptions = {
            key: "0ca7a13d50215d415097e892c383d662",
            format: "iframe",
            height: 90,
            width: 728,
            params: {},
          };
        </script>
        <script
          type="text/javascript"
          src="//discontentcocoamatters.com/0ca7a13d50215d415097e892c383d662/invoke.js"
        ></script>
      </div>
    </div>

    <!-- Floating Deal Bar -->
    <div class="floating-deal-bar" id="floatingDealBar">
      <div class="deal-content">
        <span class="deal-icon">üíé</span>
        <span class="deal-text"
          >Premium HD Access - Exclusive 70% OFF Limited Offer</span
        >
        <a
          href="https://discontentcocoamatters.com/ng0xuthz?key=be3c8d271e4ef2f83423de963fb113b3"
          target="_blank"
          class="deal-button"
        >
          Claim Deal ‚Üí
        </a>
      </div>
      <button class="deal-minimize" id="dealMinimize" title="Minimize">
        ‚ñº
      </button>
      <button class="deal-close" id="dealClose" title="Close">√ó</button>
    </div>

    <div class="container">
      <header>
        <div class="logo">
          <a
            href="https://discontentcocoamatters.com/ng0xuthz?key=be3c8d271e4ef2f83423de963fb113b3"
            target="_blank"
          >
            <img
              src="logo.png"
              alt="Pirates Treasure Logo"
              class="logo-image"
            />
          </a>
        </div>
      </header>

      <div class="cards-grid" id="cardsGrid">
        <!-- Card 1 -->
        <div class="card" data-category="games">
          <span class="card-count-badge" id="count-games">0 sites</span>
          <div class="card-icon">üéÆ</div>
          <h2>Games</h2>
          <p>Discover amazing games and gaming resources</p>
        </div>

        <!-- Card 2 -->
        <div class="card" data-category="movies">
          <span class="card-count-badge" id="count-movies">0 sites</span>
          <div class="card-icon">üé¨</div>
          <h2>Movies/Shows</h2>
          <p>Stream your favorite movies and TV shows</p>
        </div>

        <!-- Card 3 -->
        <div class="card" data-category="streaming">
          <span class="card-count-badge" id="count-streaming">0 sites</span>
          <div class="card-icon">üì∫</div>
          <h2>Streaming</h2>
          <p>Live Sports & TV</p>
        </div>

        <!-- Card 4 -->
        <div class="card" data-category="software">
          <span class="card-count-badge" id="count-software">0 sites</span>
          <div class="card-icon">üíª</div>
          <h2>Software</h2>
          <p>Essential tools and applications</p>
        </div>

        <!-- Card 5 -->
        <div class="card" data-category="books">
          <span class="card-count-badge" id="count-books">0 sites</span>
          <div class="card-icon">üìö</div>
          <h2>Books</h2>
          <p>Digital library and e-books</p>
        </div>

        <!-- Card 6 -->
        <div class="card" data-category="music">
          <span class="card-count-badge" id="count-music">0 sites</span>
          <div class="card-icon">üéµ</div>
          <h2>Music</h2>
          <p>Stream and download music</p>
        </div>

        <!-- Card 7 -->
        <div class="card" data-category="anime">
          <span class="card-count-badge" id="count-anime">0 sites</span>
          <div class="card-icon">‚öîÔ∏è</div>
          <h2>Anime</h2>
          <p>Watch and download anime</p>
        </div>

        <!-- Card 8 -->
        <div class="card" data-category="utilities">
          <span class="card-count-badge" id="count-utilities">0 sites</span>
          <div class="card-icon">üîß</div>
          <h2>Utilities</h2>
          <p>Helpful online tools</p>
        </div>

        <!-- Card 9 -->
        <div class="card" data-category="learning">
          <span class="card-count-badge" id="count-learning">0 sites</span>
          <div class="card-icon">üìñ</div>
          <h2>Learning</h2>
          <p>Educational content and courses</p>
        </div>
      </div>

      <!-- Links View Container -->
      <div class="links-container" id="linksContainer" style="display: none">
        <button class="back-button" id="backButton">
          <span class="back-icon">‚óÑ</span>
          <span class="back-text">Back to Categories</span>
        </button>

        <!-- Filter Controls -->
        <div class="filter-controls" id="filterControls">
          <div class="filter-group">
            <button class="filter-btn active" data-filter="all">
              <span class="filter-icon">üåü</span>
              All Sites
            </button>
            <button class="filter-btn" data-filter="favorites">
              <span class="filter-icon">‚ù§Ô∏è</span>
              Favorites
              <span class="favorites-count" id="favoritesCount">0</span>
            </button>
            <button class="filter-btn" data-filter="new">
              <span class="filter-icon">‚ú®</span>
              New
            </button>
            <button class="filter-btn" data-filter="popular">
              <span class="filter-icon">üî•</span>
              Popular
            </button>
          </div>
        </div>

        <div class="links-header">
          <div class="links-icon" id="linksIcon"></div>
          <h2 id="linksTitle"></h2>
          <span class="site-count-badge" id="siteCountBadge"></span>
        </div>
        <div class="links-grid" id="linksGrid"></div>
      </div>
    </div>

    <script>
      // ===============================================
      // PERFORMANCE OPTIMIZATIONS - Loading & Lazy Loading
      // ===============================================

      // Show loading overlay initially
      const loadingOverlay = document.createElement("div");
      loadingOverlay.className = "loading-overlay";
      loadingOverlay.innerHTML = '<span class="loader"></span>';
      document.body.appendChild(loadingOverlay);

      // Hide loading overlay when page is ready
      window.addEventListener("load", () => {
        setTimeout(() => {
          loadingOverlay.classList.add("fade-out");
          setTimeout(() => loadingOverlay.remove(), 300);
        }, 500);
      });

      // Intersection Observer for lazy loading elements
      const lazyLoadObserver = new IntersectionObserver(
        (entries) => {
          entries.forEach((entry) => {
            if (entry.isIntersecting) {
              entry.target.classList.add("loaded");
              lazyLoadObserver.unobserve(entry.target);
            }
          });
        },
        {
          rootMargin: "50px",
          threshold: 0.1,
        }
      );

      // Lazy load images
      document.addEventListener("DOMContentLoaded", () => {
        const lazyImages = document.querySelectorAll('img[loading="lazy"]');
        lazyImages.forEach((img) => {
          img.addEventListener("load", () => img.classList.add("loaded"));
        });

        // Apply lazy load to cards
        const cards = document.querySelectorAll(".card");
        cards.forEach((card) => {
          card.classList.add("lazy-load");
          lazyLoadObserver.observe(card);
        });
      });

      // Debounce function for performance
      function debounce(func, wait) {
        let timeout;
        return function executedFunction(...args) {
          const later = () => {
            clearTimeout(timeout);
            func(...args);
          };
          clearTimeout(timeout);
          timeout = setTimeout(later, wait);
        };
      }

      // Throttle function for scroll events
      function throttle(func, limit) {
        let inThrottle;
        return function (...args) {
          if (!inThrottle) {
            func.apply(this, args);
            inThrottle = true;
            setTimeout(() => (inThrottle = false), limit);
          }
        };
      }

      // Performance optimization: Passive event listeners
      const passiveSupported = (() => {
        let supported = false;
        try {
          const options = {
            get passive() {
              supported = true;
              return false;
            },
          };
          window.addEventListener("test", null, options);
          window.removeEventListener("test", null, options);
        } catch (err) {
          supported = false;
        }
        return supported;
      })();

      // Theme Toggle
      const themeToggle = document.getElementById("themeToggle");
      const body = document.body;

      // Check for saved theme preference or default to 'light'
      const currentTheme = localStorage.getItem("theme") || "light";
      body.classList.add(currentTheme + "-mode");

      themeToggle.addEventListener("click", () => {
        if (body.classList.contains("light-mode")) {
          body.classList.remove("light-mode");
          body.classList.add("dark-mode");
          localStorage.setItem("theme", "dark");
        } else {
          body.classList.remove("dark-mode");
          body.classList.add("light-mode");
          localStorage.setItem("theme", "light");
        }
      });

      // Links Data
      const linksData = {
        games: {
          icon: "üéÆ",
          title: "Games",
          categories: [
            {
              title: "Game Repacks",
              description: "Compressed game downloads",
              sites: [
                {
                  name: "Fitgirl Repacks",
                  url: "https://fitgirl-repacks.site/",
                  isPopular: true,
                },
                {
                  name: "Dodi Repacks",
                  url: "https://dodi-repacks.download/",
                  isPopular: true,
                },
                {
                  name: "M4ckdoge Repacks",
                  url: "https://m4ckd0ge-repacks.site/",
                  isNew: true,
                },
                { name: "Elamigos", url: "https://elamigos.site/" },
              ],
            },
            {
              title: "Free Game Libraries",
              description: "Download full games",
              sites: [
                {
                  name: "GOGgames",
                  url: "https://gog-games.to/",
                  isPopular: true,
                },
                {
                  name: "AnkerGames",
                  url: "https://ankergames.net/",
                  isNew: true,
                },
                { name: "SteamGG", url: "https://steamgg.net/" },
                { name: "SteamRip", url: "https://steamrip.com/" },
              ],
            },
            {
              title: "Game Fixes & Mods",
              description: "Online fixes and trainers",
              sites: [
                { name: "Online-Fix", url: "https://online-fix.me/" },
                { name: "WeMod", url: "https://www.wemod.com/" },
                {
                  name: "FearlessRevolution",
                  url: "https://fearlessrevolution.com/",
                },
                { name: "FLiNGTrainer", url: "https://flingtrainer.com/" },
              ],
            },
            {
              title: "Retro Gaming",
              description: "Classic games & ROMs",
              sites: [
                {
                  name: "CDRomance",
                  url: "https://retrogametalk.com/repository/",
                },
                { name: "Emuparadise", url: "https://www.emuparadise.me/" },
              ],
            },
          ],
        },
        movies: {
          icon: "üé¨",
          title: "Movies/Shows",
          categories: [
            {
              title: "Netflix-Style Streaming",
              description: "Modern UI streaming sites",
              sites: [
                {
                  name: "Flixer",
                  url: "https://flixer.sh/",
                  isPopular: true,
                },
                {
                  name: "Cineby",
                  url: "https://www.cineby.gd/",
                  isNew: true,
                },
                { name: "BitCine", url: "https://www.bitcine.app/" },
                {
                  name: "VeloraTV",
                  url: "https://veloratv.ru/",
                  isPopular: true,
                },
                { name: "XPrime Tv", url: "https://xprime.tv/" },
                {
                  name: "Fmovies",
                  url: "https://www.fmovies.gd/",
                  isPopular: true,
                },
              ],
            },
            {
              title: "Regional Content",
              description: "Bollywood & international",
              sites: [
                { name: "MKV Cinemas", url: "https://mkvcinemas.kids/" },
                { name: "PStream", url: "https://pstream.mov/" },
              ],
            },
            {
              title: "Documentaries",
              description: "Educational content",
              sites: [
                { name: "Docplus", url: "https://www.docplus.com/" },
                {
                  name: "Documentary Area",
                  url: "https://www.documentaryarea.com/",
                },
              ],
            },
            {
              title: "Torrent Sites",
              description: "Download movies & shows",
              sites: [{ name: "1337x", url: "https://1337x.to/home/" }],
            },
          ],
        },
        streaming: {
          icon: "üì∫",
          title: "Streaming",
          categories: [
            {
              title: "Live Sports Streaming",
              description: "Watch sports events live",
              sites: [
                {
                  name: "StreamEast",
                  url: "https://gostreameast.link/",
                  isPopular: true,
                },
                {
                  name: "Sportsurge",
                  url: "https://v3.sportsurge.to/home39",
                  isPopular: true,
                },
                {
                  name: "WatchSports",
                  url: "https://watchsports.to/",
                  isNew: true,
                },
                { name: "Streamed", url: "https://streamed.pk/" },
                { name: "RiveLive", url: "https://rivestream.org/livesports" },
              ],
            },
            {
              title: "International TV",
              description: "Global live television",
              sites: [
                { name: "TVPass", url: "https://tvpass.org/" },
                { name: "LiveHDTV", url: "https://www.livehdtv.com/" },
                {
                  name: "EasyWebTV",
                  url: "https://zhangboheng.github.io/Easy-Web-TV-M3u8/routes/countries.html",
                },
                { name: "RGShows", url: "https://www.rgshows.me/livetv/" },
              ],
            },
          ],
        },
        software: {
          icon: "üíª",
          title: "Software",
          categories: [
            {
              title: "General Software",
              description: "Windows applications & tools",
              sites: [
                {
                  name: "Appdoze",
                  url: "https://appdoze.net/",
                  isPopular: true,
                },
                {
                  name: "Scloud",
                  url: "https://scloud.ws/",
                  isNew: true,
                },
                { name: "DAIKOV", url: "https://diakov.net/" },
                { name: "DownloadHa", url: "https://www.downloadha.com/" },
              ],
            },
            {
              title: "Creative Software",
              description: "Video, audio & design tools",
              sites: [
                {
                  name: "DownloadPirate",
                  url: "https://www.downloadpirate.com/",
                },
                { name: "AeDownload", url: "https://aedownload.com/" },
                { name: "Audioz", url: "https://audioz.download/" },
              ],
            },
          ],
        },
        books: {
          icon: "üìö",
          title: "Books",
          categories: [
            {
              title: "E-book Libraries",
              description: "Download digital books",
              sites: [
                { name: "Z-Lib", url: "https://z-lib.gd/" },
                { name: "Libgen", url: "https://libgen.li/" },
                { name: "Anna's Archive", url: "https://annas-archive.org/" },
                { name: "Liber3", url: "https://liber3.eth.limo/" },
              ],
            },
            {
              title: "Manga & Comics",
              description: "Read manga online",
              sites: [
                { name: "RiveManga", url: "https://rivestream.org/manga" },
              ],
            },
            {
              title: "Audiobooks",
              description: "Listen to audiobooks",
              sites: [
                { name: "Audiobookbay", url: "https://audiobookbay.lu/" },
                {
                  name: "Full Length Audiobooks",
                  url: "https://fulllengthaudiobooks.net/",
                },
                { name: "Tokybook", url: "https://tokybook.com/" },
              ],
            },
          ],
        },
        music: {
          icon: "üéµ",
          title: "Music",
          categories: [
            {
              title: "Music Downloaders",
              description: "Download from streaming sites",
              sites: [
                { name: "Racoon", url: "https://shailen.dedyn.io/racoon/" },
                { name: "AZMP3", url: "https://azmp3.cc/pro1/" },
                { name: "Ezmp3", url: "https://ezconv.com/77hq" },
                { name: "Cobalt", url: "https://cobalt.tools/" },
                { name: "CnvMP3", url: "https://cnvmp3.com/" },
              ],
            },
            {
              title: "HiFi Music",
              description: "High-quality audio downloads",
              sites: [
                { name: "Lucida", url: "https://lucida.to/" },
                { name: "DoubleDouble", url: "https://doubledouble.top/" },
              ],
            },
            {
              title: "Royalty-Free Music",
              description: "Non-copyrighted tracks",
              sites: [{ name: "NCS", url: "https://ncs.io/" }],
            },
            {
              title: "Specialized Tools",
              description: "Platform-specific downloaders",
              sites: [
                {
                  name: "Music School",
                  url: "https://downloadmusicschool.com/bandcamp/",
                },
                {
                  name: "Megathread",
                  url: "https://github.com/MoonWalker440/Music-Megathread/",
                },
              ],
            },
          ],
        },
        anime: {
          icon: "‚öîÔ∏è",
          title: "Anime",
          categories: [
            {
              title: "Anime Streaming Sites",
              description: "Watch anime with sub & dub",
              sites: [
                { name: "AnimeKai", url: "https://animekai.to/" },
                { name: "HiAnime", url: "https://hianimez.to/" },
                { name: "KickAssAnime", url: "https://kaa.mx/" },
                { name: "AnimeNoSub", url: "https://animenosub.to/" },
              ],
            },
            {
              title: "Multi-Content Platforms",
              description: "Anime, movies & live TV",
              sites: [
                { name: "XPrime TV", url: "https://xprime.tv/" },
                { name: "RiveStream", url: "https://rivestream.org/" },
              ],
            },
          ],
        },
        utilities: {
          icon: "üîß",
          title: "Utilities",
          categories: [
            {
              title: "Cloud Storage",
              description: "Store & share files",
              sites: [
                { name: "Google Drive", url: "https://drive.google.com" },
                { name: "Dropbox", url: "https://www.dropbox.com" },
              ],
            },
            {
              title: "Productivity Tools",
              description: "Organization & note-taking",
              sites: [
                { name: "Notion", url: "https://www.notion.so" },
                { name: "Trello", url: "https://trello.com" },
                { name: "Evernote", url: "https://evernote.com" },
              ],
            },
            {
              title: "Security",
              description: "Password management",
              sites: [{ name: "1Password", url: "https://1password.com" }],
            },
          ],
        },
        learning: {
          icon: "üìñ",
          title: "Learning",
          categories: [
            {
              title: "Online Course Platforms",
              description: "Learn from top instructors",
              sites: [
                { name: "Coursera", url: "https://www.coursera.org" },
                { name: "Udemy", url: "https://www.udemy.com" },
                { name: "edX", url: "https://www.edx.org" },
              ],
            },
            {
              title: "Free Learning Resources",
              description: "Free education for all",
              sites: [
                { name: "Khan Academy", url: "https://www.khanacademy.org" },
                { name: "freeCodeCamp", url: "https://www.freecodecamp.org" },
              ],
            },
            {
              title: "Coding & Programming",
              description: "Learn to code interactively",
              sites: [
                { name: "Codecademy", url: "https://www.codecademy.com" },
              ],
            },
          ],
        },
      };

      // Calculate and display site counts on page load (with performance optimization)
      function updateSiteCounts() {
        // Use requestIdleCallback for non-critical updates
        const updateTask = () => {
          Object.keys(linksData).forEach((category) => {
            const data = linksData[category];
            let totalSites = 0;

            if (data.categories) {
              // Count sites in all categories
              data.categories.forEach((cat) => {
                totalSites += cat.sites.length;
              });
            } else if (data.links) {
              // Count links
              totalSites = data.links.length;
            }

            // Update badge
            const badge = document.getElementById(`count-${category}`);
            if (badge) {
              badge.textContent = `${totalSites} ${
                totalSites === 1 ? "site" : "sites"
              }`;
            }
          });
        };

        // Use requestIdleCallback if available, otherwise setTimeout
        if ("requestIdleCallback" in window) {
          requestIdleCallback(updateTask);
        } else {
          setTimeout(updateTask, 100);
        }
      }

      // Call on page load
      updateSiteCounts();

      // Card Click Event
      const cards = document.querySelectorAll(".card");
      const cardsGrid = document.getElementById("cardsGrid");
      const linksContainer = document.getElementById("linksContainer");
      const backButton = document.getElementById("backButton");
      const linksIcon = document.getElementById("linksIcon");
      const linksTitle = document.getElementById("linksTitle");
      const siteCountBadge = document.getElementById("siteCountBadge");
      const linksGrid = document.getElementById("linksGrid");

      // Favorites system
      let favorites = new Set(
        JSON.parse(localStorage.getItem("favorites") || "[]")
      );
      let currentFilter = "all";
      let currentCategory = null;

      // Update favorites count
      function updateFavoritesCount() {
        document.getElementById("favoritesCount").textContent = favorites.size;
      }
      updateFavoritesCount();

      cards.forEach((card) => {
        card.addEventListener("click", () => {
          const category = card.getAttribute("data-category");
          const data = linksData[category];

          if (data) {
            // Push state to browser history
            history.pushState({ category: category }, "", `#${category}`);

            showCategory(category, data);
          }
        });
      });

      // Function to show category content
      function showCategory(category, data) {
        // Show loading state
        linksGrid.classList.add("loading");
        linksGrid.innerHTML =
          '<div class="skeleton skeleton-card"></div>'.repeat(3);

        // Simulate network delay for smooth UX (can be removed in production)
        setTimeout(() => {
          // Update links view
          linksIcon.textContent = data.icon;
          linksTitle.textContent = data.title;

          // Calculate and display total site count
          let totalSites = 0;
          if (data.categories) {
            data.categories.forEach((cat) => {
              totalSites += cat.sites.length;
            });
          } else if (data.links) {
            totalSites = data.links.length;
          }
          siteCountBadge.textContent = `${totalSites} ${
            totalSites === 1 ? "site" : "sites"
          }`;

          // Clear and populate links
          linksGrid.innerHTML = "";
          linksGrid.classList.remove("loading");

          // Check if this is a category with categories structure
          if (data.categories) {
            linksGrid.className = "category-grid";

            // Define ad positions based on category count
            // Insert ad after every 2-3 categories
            const totalCategories = data.categories.length;
            const adPositions = [];

            // Calculate ad positions dynamically
            if (totalCategories > 2) adPositions.push(2); // After 2nd category
            if (totalCategories > 4) adPositions.push(4); // After 4th category
            if (totalCategories > 7) adPositions.push(7); // After 7th category
            if (totalCategories > 10) adPositions.push(10); // After 10th category
            if (totalCategories > 14) adPositions.push(14); // After 14th category
            if (totalCategories > 20) adPositions.push(20); // After 20th category
            if (totalCategories > 26) adPositions.push(26); // After 26th category

            data.categories.forEach((cat, catIndex) => {
              const categoryCard = document.createElement("div");
              categoryCard.className = "category-card";

              const sitesHTML = cat.sites
                .map((site, index) => {
                  const sponsoredClass = site.isSponsored
                    ? ' class="sponsored-link"'
                    : "";

                  // Generate badges HTML
                  let badgesHTML = "";
                  if (site.isNew) {
                    badgesHTML +=
                      '<span class="site-badge new-badge">NEW</span>';
                  }
                  if (site.isPopular) {
                    badgesHTML +=
                      '<span class="site-badge popular-badge">POPULAR</span>';
                  }

                  // Generate favorite button
                  const siteId = `${category}-${catIndex}-${index}`;
                  const isFavorite = favorites.has(siteId);
                  const favoriteClass = isFavorite ? "favorited" : "";

                  return `<li class="site-item" data-site-id="${siteId}" data-is-new="${
                    site.isNew || false
                  }" data-is-popular="${site.isPopular || false}">
                      <a href="${
                        site.url
                      }"${sponsoredClass} target="_blank" rel="noopener noreferrer">
                        ${index + 1}. ${site.name}
                      </a>
                      ${badgesHTML}
                      <button class="favorite-btn ${favoriteClass}" data-site-id="${siteId}" data-site-name="${
                    site.name
                  }" data-site-url="${site.url}" title="Add to favorites">
                        <span class="heart-icon">‚ô•</span>
                      </button>
                    </li>`;
                })
                .join("");

              categoryCard.innerHTML = `
                  <h3>${cat.title}</h3>
                  <p class="category-description">${cat.description}</p>
                  <ol class="sites-list">${sitesHTML}</ol>
                `;
              linksGrid.appendChild(categoryCard);

              // Insert ad card at specific positions
              if (adPositions.includes(catIndex)) {
                const adCard = document.createElement("div");
                adCard.className = "category-card ad-card";

                // Create ad script elements properly
                const script1 = document.createElement("script");
                script1.type = "text/javascript";
                script1.textContent = `
	atOptions = {
		'key' : '2a8c58230a5a926525654519d2054c8f',
		'format' : 'iframe',
		'height' : 250,
		'width' : 300,
		'params' : {}
	};
`;
                adCard.appendChild(script1);

                const script2 = document.createElement("script");
                script2.type = "text/javascript";
                script2.src =
                  "//discontentcocoamatters.com/2a8c58230a5a926525654519d2054c8f/invoke.js";
                adCard.appendChild(script2);

                linksGrid.appendChild(adCard);
              }
            });
          } else {
            // Standard link view for other categories
            linksGrid.className = "links-grid";
            data.links.forEach((link) => {
              const linkCard = document.createElement("a");
              linkCard.href = link.url;
              linkCard.target = "_blank";
              linkCard.className = "link-card";
              linkCard.innerHTML = `
                  <div class="link-icon">üîó</div>
                  <h3>${link.name}</h3>
                `;
              linksGrid.appendChild(linkCard);
            });
          }

          // Show links, hide cards
          cardsGrid.style.display = "none";
          linksContainer.style.display = "block";
          currentCategory = category;

          // Apply current filter after rendering
          applyFilter(currentFilter);

          // Add event listeners to favorite buttons
          attachFavoriteListeners();

          // Add lazy load animation to category cards
          const categoryCards = document.querySelectorAll(".category-card");
          categoryCards.forEach((card, index) => {
            card.classList.add("lazy-load");
            setTimeout(() => card.classList.add("loaded"), index * 50);
          });
        }, 200); // Close setTimeout
      }

      // Browser back/forward button support
      window.addEventListener("popstate", (event) => {
        if (event.state && event.state.category) {
          const data = linksData[event.state.category];
          if (data) {
            showCategory(event.state.category, data);
          }
        } else {
          // Go back to home
          showHome();
        }
      });

      // Function to show home page
      function showHome() {
        cardsGrid.style.display = "grid";
        linksContainer.style.display = "none";
        currentCategory = null;
        currentFilter = "all";
        filterButtons.forEach((b) => b.classList.remove("active"));
        document.querySelector('[data-filter="all"]').classList.add("active");
      }

      // Check if there's a hash on page load
      if (window.location.hash) {
        const category = window.location.hash.substring(1);
        const data = linksData[category];
        if (data) {
          showCategory(category, data);
        }
      }

      // Filter functionality
      const filterButtons = document.querySelectorAll(".filter-btn");
      filterButtons.forEach((btn) => {
        btn.addEventListener("click", () => {
          // Update active state
          filterButtons.forEach((b) => b.classList.remove("active"));
          btn.classList.add("active");

          currentFilter = btn.getAttribute("data-filter");
          applyFilter(currentFilter);
        });
      });

      function applyFilter(filter) {
        const siteItems = document.querySelectorAll(".site-item");

        siteItems.forEach((item) => {
          const siteId = item.getAttribute("data-site-id");
          const isNew = item.getAttribute("data-is-new") === "true";
          const isPopular = item.getAttribute("data-is-popular") === "true";
          const isFavorite = favorites.has(siteId);

          let shouldShow = true;

          if (filter === "favorites") {
            shouldShow = isFavorite;
          } else if (filter === "new") {
            shouldShow = isNew;
          } else if (filter === "popular") {
            shouldShow = isPopular;
          }

          item.style.display = shouldShow ? "flex" : "none";
        });
      }

      function attachFavoriteListeners() {
        const favoriteButtons = document.querySelectorAll(".favorite-btn");
        favoriteButtons.forEach((btn) => {
          btn.addEventListener("click", (e) => {
            e.preventDefault();
            e.stopPropagation();

            const siteId = btn.getAttribute("data-site-id");
            const siteName = btn.getAttribute("data-site-name");
            const siteUrl = btn.getAttribute("data-site-url");

            if (favorites.has(siteId)) {
              favorites.delete(siteId);
              btn.classList.remove("favorited");
            } else {
              favorites.add(siteId);
              btn.classList.add("favorited");
            }

            // Save to localStorage
            localStorage.setItem("favorites", JSON.stringify([...favorites]));
            updateFavoritesCount();

            // If viewing favorites filter, reapply it
            if (currentFilter === "favorites") {
              applyFilter("favorites");
            }
          });
        });
      }

      // Back Button Event
      backButton.addEventListener("click", () => {
        // Use browser history to go back
        if (window.history.length > 1) {
          window.history.back();
        } else {
          showHome();
        }
      });

      // Deal Bar Functionality
      const dealBar = document.getElementById("floatingDealBar");
      const dealMinimize = document.getElementById("dealMinimize");
      const dealClose = document.getElementById("dealClose");

      // Check for saved preferences
      const dealBarState = localStorage.getItem("dealBarState");
      if (dealBarState === "hidden") {
        dealBar.classList.add("hidden");
      } else if (dealBarState === "minimized") {
        dealBar.classList.add("minimized");
        dealMinimize.innerHTML = "‚ñ≤";
        dealMinimize.title = "Expand";
      }

      // Minimize/Expand toggle
      dealMinimize.addEventListener("click", () => {
        dealBar.classList.toggle("minimized");
        if (dealBar.classList.contains("minimized")) {
          dealMinimize.innerHTML = "‚ñ≤";
          dealMinimize.title = "Expand";
          localStorage.setItem("dealBarState", "minimized");
        } else {
          dealMinimize.innerHTML = "‚ñº";
          dealMinimize.title = "Minimize";
          localStorage.setItem("dealBarState", "normal");
        }
      });

      // Close button
      dealClose.addEventListener("click", () => {
        dealBar.classList.add("hidden");
        localStorage.setItem("dealBarState", "hidden");
      });

      // Click on minimized bar to expand
      dealBar.addEventListener("click", (e) => {
        if (
          dealBar.classList.contains("minimized") &&
          !e.target.classList.contains("deal-minimize") &&
          !e.target.classList.contains("deal-close") &&
          !e.target.classList.contains("deal-button")
        ) {
          dealBar.classList.remove("minimized");
          dealMinimize.innerHTML = "‚ñº";
          dealMinimize.title = "Minimize";
          localStorage.setItem("dealBarState", "normal");
        }
      });
    </script>
    <!-- Bottom Ad Script -->
    <script
      type="text/javascript"
      src="//discontentcocoamatters.com/6a/52/1b/6a521b2b90c54bd294e1c243e44c5d67.js"
    ></script>
  </body>
</html>
